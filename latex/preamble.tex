\usepackage[top=3.0cm,left=3.0cm,right=3.0cm,bottom=2.43cm]{geometry}
\linespread{1.2}
\usepackage{booktabs} % Better horizontal rules in tables
%\usepackage{longtable}
\usepackage[bf,singlelinecheck=off]{caption}
\usepackage{float}

\usepackage[T1]{fontenc}
\usepackage[usefilenames,RMstyle={Text,Semibold},SSstyle={Text,Semibold},TTstyle={Text,Semibold}]{plex-otf} %Use IBM Plex font family

\usepackage{framed,color}
\usepackage[x11names]{xcolor}
\definecolor{shadecolor}{RGB}{248,248,248}

\usepackage{amsmath} % good math formulas
\usepackage{microtype}
\usepackage{hyperref}

\widowpenalty=10000
%\usepackage[defaultlines=3, all]{nowidow}
\clubpenalty=10000
\usepackage{listings}
\usepackage{fancyvrb}
\lstdefinelanguage{R}{%
  keywordsprefix=sits,
  morekeywords={dplyr, filter, file, library, plot, system,
    apply, classify, cube, get_data, label_classification,
    labels, smooth, uncertainty,
    accuracy, confidence_sampling,
    labels_summary, clustering,
    whittaker, sgolay, lighttae, tae, resnet,
    tempcnn, mlp, regularize, select, train,
    rfor, svm, xgboost, reduce_imbalance,
    kfold_validate, to_xlsx, as_sf},
  %literate={,}{{,\\*}}3
  prebreak=\space,
  postbreak=\space,
  alsoletter={_*},%
  sensitive,%
  morecomment=[l]\#,%
  morestring=[d]",%
  morestring=[d]'% 2001 Robert Denham
  }%
\lstset{
  language=R,
  breaklines=true,
  breakatwhitespace=false,
  frame=single,
  numbers=left,
  basicstyle=\small\ttfamily, 
  %stringstyle=\color{Sienna4},
  commentstyle=\color{DarkOliveGreen},
  keywordstyle=\color{Red4},
  keywordstyle=[2]\color{black},
  columns=flexible,
  showstringspaces=false,
  tabsize=4,
  numbers=none,
  backgroundcolor=\color{shadecolor},
  fancyvrb=true
}
% Add your keywords here, and have this in a separate file
% and include it in your preamble
% \lstset{emph={cube,classify},
%     emphstyle=\color{red}
% }

\renewcommand{\textfraction}{0.05}
\renewcommand{\topfraction}{0.8}
\renewcommand{\bottomfraction}{0.8}
\renewcommand{\floatpagefraction}{0.75}

\renewenvironment{quote}{\begin{VF}}{\end{VF}}
\let\oldhref\href
\renewcommand{\href}[2]{#2\footnote{\url{#1}}}

\ifxetex
  \usepackage{letltxmacro}
  \setlength{\XeTeXLinkMargin}{1pt}
  \LetLtxMacro\SavedIncludeGraphics\includegraphics
  \def\includegraphics#1#{% #1 catches optional stuff (star/opt. arg.)
    \IncludeGraphicsAux{#1}%
  }%
  \newcommand*{\IncludeGraphicsAux}[2]{%
    \XeTeXLinkBox{%
      \SavedIncludeGraphics#1{#2}%
    }%
  }%
\fi


\usepackage{makeidx}
\makeindex

\urlstyle{tt}


%\frontmatter